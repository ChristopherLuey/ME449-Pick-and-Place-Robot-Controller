from modern_robotics import *
import math

r = 0.2/2
r2 = 0.04/2
h2= 0.2
V= 4/3 * math.pi * r ** 3
V2 = math.pi * r2 ** 2 * h2

Vtot = V+ V2


mass1 = V * 5600
mass2 = V2 *5600
Ixx2 = mass2 *( 3 * r2 ** 2 + h2 **2) /12
Iyy2 = mass2 * (3*r2**2 + h2 ** 2)/12
Izz2 = mass2 * r2 ** 2 / 2

Ixx = mass1 * (2 * r**2)/5
Iyy = mass1 * (2 * r**2)/5
Izz = mass1 * (2 * r**2)/5

Ib = np.array([[Ixx, 0, 0], [0, Iyy ,0],[0,0,Izz]])
Ib2 = np.array([[Ixx2, 0, 0], [0, Iyy2 ,0],[0,0,Izz2]])

q = np.array([[0],
        [0],
        [-0.20]])


Iq = Ib + mass1 * (q.T @ q * np.identity(3) - q @ q.T)
print(Iq)

q = np.array([[0],
        [0],
        [0.2]])

Iq2 = Ib + mass1 * (q.T @ q * np.identity(3) - q @ q.T)
print(Ib2 + Iq + Iq2)


import numpy as np

M01 = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0.089159], [0, 0, 0, 1]]
M12 = [[0, 0, 1, 0.28], [0, 1, 0, 0.13585], [-1, 0, 0, 0], [0, 0, 0, 1]]
M23 = [[1, 0, 0, 0], [0, 1, 0, -0.1197], [0, 0, 1, 0.395], [0, 0, 0, 1]]
M34 = [[0, 0, 1, 0], [0, 1, 0, 0], [-1, 0, 0, 0.14225], [0, 0, 0, 1]]
M45 = [[1, 0, 0, 0], [0, 1, 0, 0.093], [0, 0, 1, 0], [0, 0, 0, 1]]
M56 = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0.09465], [0, 0, 0, 1]]
M67 = [[1, 0, 0, 0], [0, 0, 1, 0.0823], [0, -1, 0, 0], [0, 0, 0, 1]]
G1 = np.diag([0.010267495893, 0.010267495893,  0.00666, 3.7, 3.7, 3.7])
G2 = np.diag([0.22689067591, 0.22689067591, 0.0151074, 8.393, 8.393, 8.393])
G3 = np.diag([0.049443313556, 0.049443313556, 0.004095, 2.275, 2.275, 2.275])
G4 = np.diag([0.111172755531, 0.111172755531, 0.21942, 1.219, 1.219, 1.219])
G5 = np.diag([0.111172755531, 0.111172755531, 0.21942, 1.219, 1.219, 1.219])
G6 = np.diag([0.0171364731454, 0.0171364731454, 0.033822, 0.1879, 0.1879, 0.1879])
Glist = [G1, G2, G3, G4, G5, G6]
Mlist = [M01, M12, M23, M34, M45, M56, M67]
Slist = [[0,         0,         0,         0,        0,        0],
         [0,         1,         1,         1,        0,        1],
         [1,         0,         0,         0,       -1,        0],
         [0, -0.089159, -0.089159, -0.089159, -0.10915, 0.005491],
         [0,         0,         0,         0,  0.81725,        0],
         [0,         0,     0.425,   0.81725,        0,  0.81725]]

theta = np.array([[0], [np.pi/6], [np.pi/4], [np.pi/3], [np.pi/2],[2*np.pi/3]])
theta = [0,np.pi/6, np.pi/4, np.pi/3, np.pi/2, 2 * np.pi / 3]
dtheta = np.array([[0.2], [0.2], [0.2], [0.2], [0.2],[0.2]])
dtheta = [0.2,0.2,0.2,0.2,0.2,0.2]
ddtheta = np.array([[0.1], [0.1], [0.1], [0.1], [0.1],[0.1]])
ddtheta = [0.1,0.1,0.1,0.1,0.1,0.1]
g = np.array([[0],[0],[-9.81]])
g= [0,0,-9.81]
Ftip = np.array([[0.1], [0.1], [0.1], [0.1], [0.1],[0.1]])
Ftip = [0.1,0.1,0.1,0.1,0.1,0.1]

out = InverseDynamics(theta, dtheta,ddtheta,g,Ftip, Mlist, Glist, Slist)
print(str(list(out)))
